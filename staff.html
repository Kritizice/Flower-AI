<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Staff order decoder</title>
  <style>
    body{font-family:Arial;background:#f5f5f5;margin:2rem}
    textarea{width:100%;height:120px}
    button{padding:.6rem 1.2rem;background:#e91e63;color:#fff;border:none;cursor:pointer}
    pre{background:#fff;padding:1rem;white-space:pre-wrap}
  </style>
</head>
<body>

<h2>Paste the secret code (full ciphertext)</h2>
<textarea id="cipher" placeholder="Big block of letters…"></textarea><br>
<button onclick="openOrder()">Decrypt</button>
<pre id="plain"></pre>

<script type="module">
import CryptoJS from 'https://cdn.skypack.dev/crypto-js';
const STAFF_PASSWORD = 'myFlorist123';   // same password you set in index.html

window.openOrder = () => {
  try{
    const plain = CryptoJS.AES.decrypt(document.getElementById('cipher').value, STAFF_PASSWORD)
                              .toString(CryptoJS.enc.Utf8);
    const obj = JSON.parse(plain);
    document.getElementById('plain').textContent =
      `Recipe:\n${JSON.stringify(obj.recipe,null,2)}\n\nPrice: €${obj.cost}\nPrompt: ${obj.imgPrompt}`;
  }catch(e){ alert('Wrong password or bad code'); }
};
</script>

</body>
</html>
